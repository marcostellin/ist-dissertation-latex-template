%!TEX root = ../dissertation.tex

\chapter{State of the art}
\label{chapter:stateoftheart}

The scenario envisioned in the present work, a forest in which a wildfire took place, is an example of a disaster scenario. Our system has the main objective of helping the fire squads to better assess the conditions of fire fighters on the ground and to better manage the disaster. In this chapter an initial overview of the main adhoc communication solutions to deal with disaster scenarios is given. Since our proposed architecture is composed of two main pieces, ground LoRaWAN \glspl{ED} and a UAV-based mesh WiFi network, an overview is given of the literature regarding the implementations and performance of LoRa and of the existing disaster management solutions based on UAVs. To conclude, mesh topology algorithms are reviewed and discussed.

\section{LoRa Implementations and Performance}

LoRa is a relatively recent technology: the first patent for the LoRa modulation was issued in 2008, while the first version of the LoRaWAN standard was released only in June 2015. Even if it is a young technology, LoRa got the attention of both the academy and the general public, especially thanks to the availability in the market of cheap LoRa \glspl{ED} and \glspl{GW}. \gls{TTN} is a notable example of a global LoRaWAN network that is continuously expanded and supported by the members of the community. As of today, the \gls{TTN} consists of more than 3500 active gateways deployed all around the world and gives the opportunity to the users to deploy their devices and build their applications. LoRa also got the attention of many researchers. As a result, a vast literature focusing on various aspects of the technology has been produced in the last couple of years. \\ \\
Petajajarvi et al. \cite{ref:soa-lora-range1} have conducted empirical measures to determine the maximum range of LoRa in a small rural city in Finland. The results show that, by using the maximum \gls{SF} and a bandwidth of 125 kHz in the 868 MHz band, the signal can reach the \gls{GW} from 15 Km of distance on ground and 30 Km on water, with increments in the \gls{PDR} proportional to the distance. JÃ¶rke et al. \cite{ref:soa-lora-range2} have performed a similar analysis in a medium density urban area, noting in this case, that the maximum range under the same conditions of \cite{ref:soa-lora-range1} dropped to 5.8 Km. In \cite{ref:soa-lora-range3}, the reception in presence of indoor \glspl{ED} is also evaluated: the authors report that at a distance of 1.2 Km from the gateway, the \gls{PDR} is already between 60\% and 90\%. The conclusion of the authors is that the presence of \gls{LOS} in LoRa is particularly important, therefore making LoRa not suitable in indoor environments. The importance of \gls{LOS} is also outlined by Iova et al. \cite{ref:soa-lora-mountains}. In this case the experiments were conducted in a forest in presence of numerous trees between the transmitter and the receiver. In the experiment, the transmitter was moved further and further away from the receiver and at around 90-100 m the signal was completely lost. The authors conclude that vegetation has a huge impact on LoRa signal propagation by dropping the range of an order of magnitude. \\ \\
The use of \gls{CSS}, a variation of \gls{DSSS}, makes the LoRa modulation very resilient to noise. This assumption is verified by Angrisani et al. \cite{ref:soa-lora-noise}. In the experiment, different levels of white Gaussian noise were applied to the signal with a minimum SNR of -10 dbm. As expected, the use of a smaller bandwidth and, more significantly, the use of a higher \gls{SF} improve the performance of the modulation. The coding rate, on the other hand, has a less significant impact on the performance in noisy environments. \\ \\
One of the main requirements of an \gls{LPWAN} is its ability to scale to hundreds or even thousands of devices. Early attempts of assessing the scalability of LoRa were performed by resorting to mathematical models. In \cite{ref:soa-lora-scal1}, the scalability of a LoRa network in presence of a single \gls{GW} is studied. The authors modelled the LoRaWAN MAC as pure ALOHA and reached the conclusion that LoRa can potentially scale to millions of devices in case of \glspl{ED} generating low traffic only in uplink, but most of the devices need to stay in the vicinity of the \gls{GW}. Therefore, the use of large \glspl{SF} is limited to only a few selected devices. The authors also point out that huge scalability issues are present in downlink, since \glspl{GW} are still subject to duty cycle limitations and acknowledging every packet of a large network is impossible. A capacity evaluation based on ALOHA is also presented in \cite{ref:soa-lora-scal2}. Pure mathematical analysis based on the ALOHA channel access, fail to predict the real scalability of LoRa, as it is reported in \cite{ref:soa-lora-scal3}. The main reason is that in ALOHA a collision always results in a packet loss, while this is not always the case in LoRa. Moreover, the presence of multiple \glspl{GW} can attenuate the effects of collisions. Bor et al. \cite{ref:soa-lora-scal3} developed the LoRaSim network simulator in order to efficiently study the capacity of a LoRa network. The conclusion is that, in a smart city scenario, LoRa can support 120 nodes in an area of 3.8 ha, but this can be improved by resorting to multiple \glspl{GW} and dynamic selection of parameters. The latter statement is also confirmed by Van den Abeele et al. \cite{ref:soa-lora-scal4}, which conducted simulations using a specially developed ns-3 module using a realistic LoRa error model based on numerical simulations conducted in Matlab. Magrin et al. \cite{ref:soa-lora-scal5} developed a similar ns-3 module, but using a different approach to model the LoRa channel. The module is then used to evaluate the performance of a LoRa deployment in a smart city scenario. \\ \\
An effective solution to dynamically adapt the parameters of \glspl{ED} in order to increase the network capacity is presented by Cuomo et al. \cite{ref:soa-lora-scal6}. Two algorithms of increasing complexity, EXPLoRa-SF and EXPLoRa-AT, have been developed to dynamically assign the \gls{SF} to \glspl{ED} based on distance from the \gls{GW}, RSSI and number of connected devices. The results of the simulations conclude that these approaches significantly outperform the basic \gls{ADR} approach.   

\section{LoRa Implementations in Simulators}
%Introduction to ns3/other simulators and the available Lora modules

%27/05 - 28/05 - 29/05  

\section{\glspl{UAV} Ad Hoc Wireless Communications in Disaster Scenarios}

% 30/05 - 31/05
   
%\section{Ad Hoc Wireless Communications in Disaster Scenarios}
%
%During a disaster and in the moments immediately after its occurrence, the communication infrastructure may be totally or partially disrupted. In remote environments, such as rural areas, a communication infrastructure may be even completely absent. Ad hoc networks, in conjunction with \gls{IoT} sensors that can be easily carried by victims, rescuers and vehicles, have been proposed as a solution to deal with the disruption caused by the disaster. The main proposed solutions fall in one of four main categories: \glspl{MANET}, \glspl{DTN}, \glspl{WSN} and \glspl{WMN}. The performance of these solutions in disaster scenarios has been assessed by modelling the movement pattern of rescuers, victims and emergency vehicles by means of generic mobility models adapted to the situation or by means of specialized mobility models. In this regard, the main contribution is given by Aschenbruck et al. \cite{ref:soa-mobmodel1} with the Disaster Area mobility model, which is extensively used in the literature. The model subdivides the area in tactical areas in which first responders and/or victims move. Moving from one area to another adjacent area can be done only by resorting to specific entry points.   \\
%
%\glspl{MANET} are better suited when routes between nodes frequently change due to nodes mobility, but an end-to-end path to each node can be determined in almost all the circumstances. The performances of different \gls{MANET} routing protocols have been analysed in disaster scenarios.
%Reina et al. \cite{ref:soa-manet1} compare \gls{AODV}, \gls{AOMDV} and \gls{DSR} reactive protocols in a scenario where nodes use the disaster mobility model described in \cite{ref:soa-mobmodel1}. \gls{AODV} performs better in terms of \gls{PDR} and throughput, while \gls{AOMDV} and \gls{DSR} suffer from the overhead caused by the storage of multiple routes to the destination. In fact, the additional routes prove to be unusable in most of the cases due to the high mobility of the nodes. However, the authors suggest that, in case of low mobility, \gls{DSR} and \gls{AOMDV} could be potentially effective. 
%Wister et al. \cite{ref:soa-manet2} compare \gls{AODV} and a variation of \gls{AODV}, DYMO. In this case, DYMO performs better in almost any circumstance when nodes move at high speed (above 20 m/s), but both protocols have almost the same performance in case of low mobility. Raffelsberger et al. \cite{ref:soa-manet3} evaluate, in addition to \gls{AODV} and DYMO, two proactive routing protocols, BATMAN and OLSR. The scenario is, in this case, more complex than the ones of the other works, since it includes indoor nodes experiencing wireless shadowing. Moreover the network occasionally experience some partitions. Also in this case, in terms of \gls{PDR}, \gls{AODV} performs better, immediately followed by OLSR. The main performance differences between the considered protocols is caused by the presence of indoor nodes. \\\\
%\glspl{DTN} may perform better than \glspl{MANET} when the density of nodes is low and the network experiences frequent partitioning. Since end-to-end paths from source to destination are not available at all times, data is temporarily stored and only forwarded to neighbouring nodes when the opportunity comes. A comparison of some \gls{DTN} flooding protocols is presented in \cite{ref:soa-dtn1}. The authors consider a disaster scenario in which the nodes are distributed in clusters and tend to stick together inside the cluster. Five flooding protocols have been analysed: Epidemic, PRoPHET, MaxProp, Spray and Wait and Spray and Focus. All of them floods the messages to all the neighbours encountered in the hope that messages will eventually reach the intended destination. Some of them, like MaxProp and PRoPHET, also maintain a probability or likelihood vector that are used to flood the messages only to the nodes which are more likely to deliver them, thus limiting extensive flooding. The authors conclude that MaxProp and PRoPHET outperform the other routing mechanisms in terms of delivery probability. \\\\
%In a disaster scenario, \glspl{WSN} are typically used in the early detection phase. In the wildfire scenario considered in this work, \glspl{WSN} can be used to detect the fire and alert the incident operators. \glspl{WSN} have been thoroughly studied and investigated in the literature for the purpose of forest fire detection and monitoring. Previous solutions, such as CCD cameras, satellite imagery and optical, infrared and thermal images have proven to be unreliable due to, respectively, the cost of the infrastructures needed (towers), the long scan cycle and the sensibility to weather conditions (especially fog and clouds) and a high rate of false positives. \glspl{WSN}, when deployed in vast forest areas, have proven to be an efficient, scalable and cost-effective way of gathering useful data that can help preventing and forecasting forest fires. Energy efficiency is another primary concern in such scenarios, since all the devices are battery-powered and densely deployed, thus making maintenance operations very difficult. For this reason most of the solutions use short-range energy-efficient communication protocols of the family 802.15.4 (e.g. ZigBee) and devices alternate between an active and sleeping state to save energy. Energy harvesting is also a common solution to increase battery life. Forest areas are usually far away from cities or urban environments, thus restricting the access to a reliable network infrastructure such as WiFi or even cellular networks. In these cases the preferred approach relies on sensors that can self-organize and can set up an ad-hoc wireless network. Messages are then routed to a central node using a multi-hop routing protocol. One solution using this approach for detecting wildfires is presented in \cite{ref:soa-wsn1}. The authors propose a WSN composed of devices mounting humidity and heat sensors, with the addition of gas/smoke sensors. The retrieved data is used to compute the probability of fires in the area and to detect the position of the fire edge when the fire is close to the the sensors. Devices communicate using ZigBee using a multi-hop routing protocol. The information retrieved by sensor nodes is gathered in central nodes mounted in an elevated position. These nodes are more powerful and can communicate with the base station using the long range \gls{ISM} bands. A similar solution is presented also in \cite{undefined} and \cite{ref:soa-wsn2}. \\
%
%\glspl{WMN} are very similar to \glspl{MANET}. Most of the times the technologies and protocols used are the same, but the objective is different. In a disaster scenario, \glspl{WMN} are mainly used to form a backbone network to restore connectivity between nodes. Thanks to the broad availability of \glspl{UAV} and other types of flying vehicles, \glspl{FANET} are at the center of the current research in \glspl{WMN}. Moreover, \glspl{FANET} can take advantage of good \gls{LOS} and low interference. SKYMESH \cite{ref:soa-fanet1} is an early attempt to deploy a \gls{FANET} operating as a backbone network using balloons in a disaster scenario. Balloons floats at 50-100 m above the ground and, by forming a WiFi ad hoc network using OLSR, provide internet connectivity to gateways on the ground. However, this solution is not optimal, since balloons are tethered to the ground and can only maintain a static position. More recently, solutions involving \glspl{UAV} have drawn the attention of researchers thanks to their adaptability to a wide range of situations. Di Felice et al. \cite{ref:soa-fanet2} have proposed a self-organizing \gls{UAV} mesh network to provide emergency communications to  groups of isolated user on the ground by using a distributed topology algorithm based on \glspl{VSF}. Idle \glspl{UAV} can detach themselves from the formation to search other ground nodes, thus incrementing the connectivity of the whole network. The authors also tackle the problem of the limited flying autonomy of \glspl{UAV} by means of a scheduling algorithm.   
%In a disaster scenario, \glspl{UAV} mesh networks are not only limited to relaying, but can perform a variety of functions including search and rescue missions and disaster assessment. As an example, Scherer et al. \cite{ref:soa-fanet3} propose a system in which a fleet of drones is used to scan an area to detect the presence of people. When the target is acquired by a drone, the other drones reposition themselves in order to form an ad hoc wireless network to relay the video stream to the base station.

\section{UAVs path planning and optimal placement for relaying}

Establishing a relay wireless ad hoc network of \glspl{UAV} comes with a set of non trivial problems: how to optimally place the \glspl{UAV} in a 3D environment and how to plan the movement of \glspl{UAV} to avoid collisions and at the same time reach the target objective. A problem that frequently arises is the connectivity vs coverage problem. In an ideal situation, the mesh network should provide the maximum possible coverage, while at the same time maintain the connectivity between its members. Unfortunately, due to the limited resources available (i.e. number of \glspl{UAV}), achieving both requirements is typically not realistic and therefore one must give priority to one or the other. The algorithms that have been developed to tackle the aforementioned problems fall in two main categories: centralized and distributed. Centralized algorithms relies on one single entity having full knowledge and control of the nodes forming the network. This approach typically produces close to optimal results, but suffers from single point of failure problem and, if the dimension of the problem is big, the amount of computations can give rise to substantial delays. Mixed integer programming techniques are typically used. On the other hand, distributed algorithms give more approximated solutions, but computations are typically smaller and distributed among the nodes, thus making the network more resilient in case of unexpected situations. Most of the existing distributed algorithms adapts concepts coming from physics or natural animal behaviour. In this section some of the existing approaches to tackle the aforementioned problems are presented. \\\\
Chandrashekar et al. \cite{ref:soa-plac-centr1} study the problem of determining the minimum number of \glspl{UAV} necessary to provide full coverage to clusters of isolated ground nodes and at the same time maintain connectivity between \glspl{UAV}. All \glspl{UAV} fly at a fixed altitude $h$ and have a communication radius with ground nodes of $MaxRadius$. The solution is based on a centralized algorithm that runs every $\Delta T s$. First, the ground nodes are divided in clusters based on a connectivity matrix.
For each cluster, the algorithm determines the set of neighbouring clusters, defined as the clusters in which the distance between the closest points is at most $2MaxRadius$. Starting from the cluster with fewer neighbours, the subset of neighbours that are also each other's neighbours is selected. The position of the \gls{UAV} that covers this subset of clusters (super cluster) is determined by means of a convex minimization problem:

\[\min_{X} R\ \quad s.t. \quad ||X-p_i|| \leq R \quad i=1,\cdots,M \]

where $X$ is the position of the \gls{UAV}, $R$ is the minimum radius of the circle covering the super cluster and $p_i$ is the position of the ground node of cluster $i$ which is closer to $C$. $C$ is determined by computing the center of gravity of the center points of each cluster belonging to the considered super cluster. If $R \geq 2MaxRadius$, the furthest cluster is removed and the computation is performed again until an acceptable solution is found. The aforementioned steps are repeated until all clusters, grouped in super clusters, have an associated \gls{UAV}. Finally, the \gls{UAV} to send to the new computed location is chosen by using a metric that minimizes the total travel distance of \glspl{UAV}. \\ \\
Caillouet et al. \cite{ref:soa-plac-centr2} tackle the more challenging problem of optimally positioning the minimum number of \glspl{UAV}, taken from the set $\mathcal{U}$ of all available \glspl{UAV}, in order to cover a set $\mathcal{N}$ of targets on the ground, while maintaining the connectivity of the aerial mesh to a ground base station. Targets have a fixed position in the 2D plane $(x_n, y_n)$, while \glspl{UAV} can occupy any position $p = (x_u, y_u, h_u)$ in the 3D space. The range of UAV-to-UAV communication is a fixed distance $R_u$. UAV-to-Target range is instead a function of the altitude $h_u$ and of the half beamwidth $\theta$ of the directional antenna mounted on each \gls{UAV}:

\[r_u^h \leq h_u \tan{\frac{\theta}{2}}\]

Each \gls{UAV} has also an associated cost $c_u$, that can be used to model energy-related or cost-related constraints. The solution proposed by the authors is based on a multi-objective linear optimization problem, that minimizes, separately, the functions

\begin{equation} \label{eq:lin-prob1}
	\min \sum\limits_{p \in P} \sum\limits_{u \in \mathcal{U}} c_u z_p^u
\end{equation}

\begin{equation} \label{eq:lin-prob2}
	\min \max_{u \in \mathcal{U}, p \in P} h_u(p) z_p^u
\end{equation}

where $z_p^u$ is a binary variable indicating if \gls{UAV} $u$ is deployed at position $p$. Intuitively, equation (\ref{eq:lin-prob1}) tries to minimize the cost of deployment, while equation (\ref{eq:lin-prob2}) tries to minimize the altitude, so to improve the air-to-ground channel quality. 
Equations (\ref{eq:lin-prob1}) and (\ref{eq:lin-prob2}) are constrained by a set of nine inequalities, omitted for space reasons, modelling the positioning and connectivity constraints defined by the problem. An evaluation of the model performed by the authors proves that the algorithm always find an optimal solution in a reasonable amount of time (1000 s). The authors also state that the impact of the connectivity constraint more than doubles, in some circumstances, the number of deployed \glspl{UAV}. \\ \\
Goddemeier et al. \cite{ref:soa-plac-pf} consider a distributed decision approach to maintain a coherent mesh network of \glspl{UAV} with the objective of exploring a 3D area. The swarm has also the additional requirement of keeping the connectivity to a ground base station. Two scenarios are studied by the authors: one in which the connectivity to the base station is permanent (Bounded Relaying) and one in which some disconnections are allowed for the purpose of extending the exploration (Release and Return). Each \gls{UAV} in the network has the ability of self-selecting, depending on the topology of the network, a different role: Scout Agents (SA) are assigned the task of exploration and sensing, Relay Nodes (RN) keep the communication between one or more \glspl{UAV} and the base station, Articulation Points (AP) link two clusters that otherwise would be fragmented and Returnees (R) are drones that, in a Release and Return scenario, are coming back to regain connectivity after being detached from the network. In order to maintain mesh connectivity, the authors propose a communication-aware algorithm based on virtual potential fields called Communication Aware Potential Fields (CAPF). According to this algorithm, each \gls{UAV} is subject to a virtual force

\begin{equation}
 \overrightarrow{F}_{dir} = \overrightarrow{F}_{conn} + \overrightarrow{F}_{AP} + \overrightarrow{F}_{CA} 
\end{equation} 

where $\overrightarrow{F}_{conn}$ is the force that keeps a \gls{UAV} connected to its neighbours, $\overrightarrow{F}_{AP}$ is the force that keeps a SN in the range of an AP or a RN and $\overrightarrow{F}_{CA}$ is the repelling force that keeps the \gls{UAV} away from obstacles (i.e. other \glspl{UAV}). The magnitude and direction of each force is determined by the strength of the communication between each pair of \glspl{UAV}, measured by the RSSI. As an example

\begin{equation}
	\overrightarrow{F}_{conn} = \sum\limits_{k=1}^{d} \overrightarrow{F}_{conn_k}
\end{equation} 

\begin{equation}
	\overrightarrow{F}_{conn_k} = q |\Delta RSSI| \overrightarrow{d_0}_k
\end{equation}

For each \gls{UAV}, the $d$ neighbouring \glspl{UAV} with the best connections are chosen. For each pair, $\overrightarrow{F}_{conn_k}$ is computed: $\Delta RSSI$ measures how far is the current RSSI ($RSSI_{curr}$) from the maximum ($RSSI_{max}$) or minimum ($RSSI_{min}$) RSSI threshold, while $q$ determines if the force is attracting or repelling. If $RSSI_{curr}$ is above $RSSI_{max}$, the force is repelling, while if it is below $RSSI_{min}$, the force is attracting. The force is zero only when $RSSI_{curr}$ is between $RSSI_{min}$ and $RSSI_{max}$. The resulting force $\overrightarrow{F}_{dir}$ gives the direction in which the \gls{UAV} has to move in the current time step. \\ \\
Di Felice et al. \cite{ref:soa-fanet2} propose a distributed approach similar to \cite{prevCit}, but based on \glspl{VSF}. The \gls{UAV} mesh network described in the paper is used to give coverage to a set of partitioned ground nodes. The mobility of \glspl{UAV} is subject to a distributed algorithm that enforces three ground rules: 

\begin{enumerate}[label=(\roman*)]
	\item connectivity of the aerial mesh must be preserved;
	\item QoS of air-to-ground and air-to-air links must be guaranteed;
	\item the number of covered ground nodes should be preserved and maximized.
\end{enumerate}

The aforementioned requirements are obtained by moving each \gls{UAV} in the mesh according to a virtual force $\overrightarrow{R}$ given by the sum of the individual spring forces associated with each wireless link established by the \gls{UAV}. In the most basic form, each force is computed as

\begin{equation}
	\overrightarrow{F} = -k \cdot (\overrightarrow{x} - l_0)
\end{equation} 

where $k$ is the stiffness of the virtual spring and $(\overrightarrow{x} - l_0)$ is the displacement of the spring from the neutral position $l_0$. Three types of \glspl{VSF}, with different parameters, are defined: one for air-to-air links, one for air-to-ground links and, if exploration is a requirement, one for attracting scout drones to new areas. The authors propose to compute the displacement $\delta = (\overrightarrow{x} - l_0)$ as a function of the link budget $LB(i,j)$ measuring the quality of the wireless link between each pair $(i,j)$ of \glspl{UAV}. $LB(i,j)$ and $\delta$ are defined as

\begin{equation}
	LB(i,j) = Pr^i_j - RS^i_{thr}
\end{equation}  

\begin{equation}
	\delta = \sqrt[\alpha]{\frac{\max(LB(i,j), LB_{req})}{\min(LB(i,j), LB_{req})}} - 1
\end{equation}

$LB(i,j)$ is simply the difference between the received power $Pr^i_j$ and the receiver sensitivity $RS^i_{thr}$, while $\delta$ expresses how much the measured link budget deviates from the required link budget $LB_{req}$. $\alpha$ is the propagation decay exponent. The stiffness $k$ is defined differently depending on the type of link. For AtA links, $k$ is a fixed parameter between 0 and 1 and determines how quickly the mesh will react to meet the desired QoS requirements. For AtG links, $k$ is dynamic and defined as

\begin{equation}
	k_{AtG} = \frac{n_i}{max(n_j)\forall j \in Neigh_i}
\end{equation}

where $n_i$ is the number of ground nodes covered by the i-th \gls{UAV} and $n_j$ is the number of ground nodes covered by the best connected j-th \gls{UAV} belonging to the neighbours of the i-th \gls{UAV}. In this way, \glspl{UAV} connecting more ground nodes will oppose more resistance to movements that might reduce the number of covered nodes. At each time step $\Delta T$, the resulting force $\overrightarrow{R}$ is computed for each \gls{UAV} and, at the end of the interval, the \gls{UAV} moves with constant speed in the newly computed direction. This happens at the condition that the force magnitude is above a certain threshold and that the number of covered nodes does not decrease. The paper also defines an exploration phase, which can be useful to find additional ground nodes not yet covered by the mesh. Each $T_{scout}$ seconds, all the \glspl{UAV} that do not have any other \gls{UAV} in their visibility zone, become Scout Nodes (SN) with probability $p_{SCOUT}$. The least visited cell in the visibility zone is then selected for exploration and an attractive spring force is computed between the \gls{UAV} and the center of the cell. In this case the displacement $\delta$ is fixed to a reference value, while the stiffness is dynamic and given by

\begin{equation}
	k_{AtF} = \left( 1 - \frac{v_i(j)}{v_i^{Max}} \right) ^ {v_i^{Min} + 1}
\end{equation}

where $v_i^Max$ and $v_i^{Min}$ are the maximum and minimum number of times the \gls{UAV} has visited a cell, considering all the cells in the scenario. $v_i(j)$ represents the number of visits of the i-th \gls{UAV} to the j-th cell. Such definition allows for less visited cells to be explored with a higher priority.

